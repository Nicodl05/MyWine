name: CI Pipeline

# Trigger pipeline on any push or pull request
on:
  push: {}
  pull_request: {}

env:
  DOTNET_VERSION: "8.0.x"

# Avoid duplicated runs for the same ref; cancel previous in-progress runs
concurrency:
  group: "${{ github.workflow }}-${{ github.ref }}"
  cancel-in-progress: true

# Minimal permissions for workflows
permissions:
  contents: read
  actions: read
  checks: write

jobs:
  build-and-test:
    # Reusable workflow: builds and runs unit tests with coverage
    uses: ./.github/workflows/build-test.yml

  security:
    # Reusable workflow: lightweight security scans
    uses: ./.github/workflows/security.yml
